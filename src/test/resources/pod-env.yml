apiVersion: v1
kind: Pod
metadata:
  name: my-pod-2
spec:
  volumes:
    - name: transfer
      emptyDir:
        medium: Memory
  initContainers:
    - name: write-conf
      image: ubuntu
      volumeMounts:
        - mountPath: /tmp
          name: transfer
      command:
        - sh
        - -c
      args:
        - echo 'export MY_ENV=my-env-value\nexport MY_ENV_2=my-env-value-2' > /tmp/envs.sh
  containers:
    - name: my-container-2
      image: ubuntu
      imagePullPolicy: IfNotPresent
      env:
        - name: FRITZ
          value: test
      volumeMounts:
        - mountPath: /tmp
          name: transfer
      command:
        - sh
        - -c
      args:
        - '. /tmp/envs.sh && echo ${MY_ENV}-output && echo ${MY_ENV_2}-output && env && sleep 9999'


